import plotly.graph_objects as go
import plotly.offline as pyo  # Plotly'nin offline modunu import ettik

# Manuel olarak oluşturulmuş veri yapısı
data = {
    "Aviation Impact": {
        "Noise Pollution": {
            "Article 1: Aircraft Noise Study": [],
            "Article 2: Noise Reduction Technologies": []
        },
        "Emissions": {
            "Article 1: CO2 Emissions in Aviation": [],
            "Article 2: Sustainable Aviation Fuels": [],
            "Article 3: Reducing Aviation Footprint": []
        },
        "Fuel Efficiency": {
            "Subtopic 1: Fuel Optimization": {
                "Article 1: Fuel Burn Reduction": [],
                "Article 2: Optimized Flight Paths": []
            },
            "Subtopic 2: Alternative Fuels": {
                "Article 1: Hydrogen as Aviation Fuel": [],
                "Article 2: Electric Aircraft": []
            }
        }
    },
    "Climate Change": {
        "Greenhouse Gases": {
            "Article 1: Aviation and Global Warming": [],
            "Article 2: Climate Change Regulations": []
        },
        "Renewable Energy": {
            "Article 1: Solar-Powered Aircraft": [],
            "Article 2: Wind Energy and Aviation": []
        }
    }
}

# Etiketler ve bağlantılar (labels and parents) listelerini oluşturma
labels = []
parents = []

# Veri yapısındaki her seviyeyi dolaşma
for subtopic, subsubtopics in data.items():
    labels.append(subtopic)
    parents.append("")
    for subsubtopic, articles in subsubtopics.items():
        labels.append(subsubtopic)
        parents.append(subtopic)
        for article in articles.keys():
            labels.append(article)
            parents.append(subsubtopic)

# Ağacın her bir seviyesindeki başlıkları ayıran bağlantıları tanımlama
fig = go.Figure(go.Treemap(
    labels=labels,
    parents=parents,
    textinfo="label+value",
    marker=dict(colors=["#E3F2FD", "#BBDEFB", "#90CAF9", "#64B5F6", "#42A5F5", "#2196F3", 
                        "#1E88E5", "#1976D2", "#1565C0", "#0D47A1", "#002171", "#82B1FF",
                        "#448AFF", "#2979FF", "#2962FF"])
))

fig.update_layout(title="Article Map: Topic Hierarchy")

# Harici bir tarayıcıda açmak için:
pyo.plot(fig, filename='article_map.html')  # Bu dosya oluşturulacak ve varsayılan tarayıcıda açılacak
